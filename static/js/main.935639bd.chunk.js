(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(2),c=a.n(r);a(13);var o=function(e){let{onUpload:t}=e;const[a,r]=Object(n.useState)([]);return l.a.createElement("div",null,l.a.createElement("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{const a=Array.from(e.target.files);r(a),t(a)},style:{marginBottom:"10px"}}),l.a.createElement("div",{style:{marginTop:"10px"}},a.map((e,t)=>l.a.createElement("p",{key:t},e.name))))},i=a(3),s=a.n(i);var d=function(){const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)([]),[c,i]=Object(n.useState)([]),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(0),[g,h]=Object(n.useState)(!1),[y,b]=Object(n.useState)("");return Object(n.useEffect)(()=>{(async()=>{try{const t=await fetch("https://ad-display-backend.onrender.com/api/cloudinary-images"),a=await t.json();a.success?r(a.data):console.error(a.error)}catch(e){console.error("Error fetching Cloudinary images:",e)}})()},[]),l.a.createElement("div",{style:{padding:"20px",fontFamily:"Arial"}},l.a.createElement("h1",null,"Ad Display Portal"),l.a.createElement(o,{onUpload:async e=>{const a=await Promise.all(Array.from(e).map(e=>(e=>new Promise(t=>{s.a.imageFileResizer(e,800,800,"JPEG",90,0,e=>t(e),"base64")}))(e)));t(a.map((t,a)=>({file:e[a],base64:t,duration:0})))}}),e.length>0&&l.a.createElement("div",{style:{marginTop:"20px"}},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",checked:d,onChange:e=>m(e.target.checked)}),"Divide time Duration equally"),d&&l.a.createElement("div",{style:{marginTop:"10px"}},l.a.createElement("label",null,"Total Duration (in minutes): "),l.a.createElement("input",{type:"number",value:u,onChange:e=>p(e.target.value),style:{marginLeft:"10px"}}))),l.a.createElement("div",null,l.a.createElement("h2",null,"Cloudinary Images"),a.length>0&&l.a.createElement("div",null,l.a.createElement("button",{onClick:async()=>{try{const t=await fetch("https://ad-display-backend.onrender.com/api/cloudinary-images/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({public_ids:c})});if(t.ok)r(a.filter(e=>!c.includes(e.public_id))),i([]),b("Selected images deleted successfully!");else{const e=await t.json();console.error(e.error),b(e.error)}}catch(e){console.error("Error deleting multiple images:",e)}},disabled:0===c.length},"Delete Selected Images"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",checked:c.length===a.length,onChange:()=>i(c.length===a.length?[]:a.map(e=>e.public_id))})),l.a.createElement("th",null,"Preview"),l.a.createElement("th",null,"Public ID"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,a.map(e=>l.a.createElement("tr",{key:e.public_id},l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",checked:c.includes(e.public_id),onChange:()=>(e=>{i(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e.public_id)})),l.a.createElement("td",null,l.a.createElement("img",{src:e.url,alt:e.public_id,style:{width:"100px"}})),l.a.createElement("td",null,e.public_id),l.a.createElement("td",null,l.a.createElement("button",{onClick:()=>(async e=>{try{const n=await fetch(`https://ad-display-backend.onrender.com/api/cloudinary-images/${e}`,{method:"DELETE"});if(n.ok)r(a.filter(t=>t.public_id!==e)),b(`Image with Public ID ${e} deleted successfully!`);else{const e=await n.json();console.error(e.error),b(e.error)}}catch(t){console.error("Error deleting image:",t)}})(e.public_id)},"Delete")))))))),l.a.createElement("button",{onClick:async()=>{h(!0),b("");for(const t of e){const n={imageName:t.file.name,imageUrl:t.base64,startDate:"2024-11-20",endDate:"2024-11-25",startTime:"08:00:00",endTime:"18:00:00",duration:d?e.length>0&&u>0?Math.floor(60*u/e.length):0:Number(t.duration)};try{const e=await fetch("https://ad-display-backend.onrender.com/api/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(e.ok){const a=await e.json();console.log(`Image ${t.file.name} uploaded successfully:`,a),b(`Image ${t.file.name} uploaded successfully!`)}else{const a=await e.json();console.error(`Error uploading ${t.file.name}:`,a.error),b(a.error||`Failed to upload ${t.file.name}.`)}}catch(a){console.error(`Error uploading ${t.file.name}:`,a),b(`An error occurred while uploading ${t.file.name}.`)}}h(!1),t([])},disabled:!d&&0!==e.length&&e.some(e=>0===e.duration)||g,style:{marginTop:"20px",padding:"10px 20px",backgroundColor:"blue",color:"white"}},g?"Uploading...":"Submit"),y&&l.a.createElement("p",{style:{marginTop:"20px",color:"red"}},y))};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(d,null)))},4:function(e,t,a){e.exports=a(14)}},[[4,1,2]]]);
//# sourceMappingURL=main.935639bd.chunk.js.map